[Unit]
Description=Adaptive readahead daemon
Documentation=man:preheat(8)
After=local-fs.target

[Service]
Type=forking
ExecStart=@bindir@/preheat
ExecReload=/bin/kill -HUP $MAINPID
PIDFile=/run/preheat.pid
Restart=on-failure
RestartSec=10s
Nice=15

# Security hardening
# NOTE: ProtectHome=read-only restricts access to home directories
# State and config files MUST be in system directories (/var, /etc)
# This is intentional for security - daemon runs system-wide only
PrivateTmp=yes
ProtectHome=read-only
ProtectSystem=full
NoNewPrivileges=yes
ProtectKernelTunables=yes
ProtectKernelModules=yes
ProtectControlGroups=yes
RestrictRealtime=yes
RestrictSUIDSGID=yes
LockPersonality=yes
ReadWritePaths=@localstatedir@/lib/preheat @localstatedir@/log /run

[Install]
WantedBy=multi-user.target
